{% extends "base.html" %}
{% load i18n %}
{% load static %}

{% block head %}
    <title>{% translate "Professores" %}</title>
    <link rel="stylesheet" href="{% static 'css/staff/professors_list.css' %}">
{% endblock %}

{% block body %}
    <h1>Professores</h1>
    <div class="tabela">
        <table class="table table-striped table-bordered editable" id="professors_list">
            <thead>
                <tr>
                    <th scope="col">Position</th>
                    <th scope="col">Registration id</th>
                    <th scope="col">Name</th>
                    <th scope="col">Birth</th>
                    <th scope="col">Date Career</th>
                    <th scope="col">Date Campus</th>
                    <th scope="col">Date Professor</th>
                    <th scope="col">Date Area</th>
                    <th scope="col">Date Institute</th>
                    <th scope="col">Academic Degree Scores</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% csrf_token %}
                {% for professor in professors %}
                    {% with counter=forloop.counter0 %}
                        <tr>
                            <td class="editable" data-column="position">{{ counter }}</td>
                            <td>{{ user.registration_id }}</td>
                            <td>{{ professor.first_name }}</td>
                            <td>{{ professor.history.birth|date:"Y-m-d" }}</td>
                            <td>{{ professor.history.date_career|date:"Y-m-d" }}</td>
                            <td>{{ professor.history.date_campus|date:"Y-m-d" }}</td>
                            <td>{{ professor.history.date_professor|date:"Y-m-d" }}</td>
                            <td>{{ professor.history.date_area|date:"Y-m-d" }}</td>
                            <td>{{ professor.history.date_institute|date:"Y-m-d" }}</td>
                            <td>
                                {% for academic_degree in professor.history.academic_degrees.all %}
                                    {{ academic_degree.name }}
                                {% endfor %}
                            </td>
                            <td><button type="button" data-toggle="modal" data-target="#editProfessorModal" class="btn btn-warning"><i class="bi bi-pencil"></i></button></td> <!-- remover e colocar link no nome -->
                        </tr>
                    {% endwith %}
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="modal fade" id="editProfessorModal" tabindex="-1" role="dialog" aria-labelledby="editProfessorModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editProfessorModalLabel">Editar Professor</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                        <label for="registration_id">ID</label>
                        <input type="text" class="form-control" id="registration_id" value="{{ user.registration_id }}" readonly>
                        </div>
                        <div class="form-group">
                        <label for="first_name">Nome</label>
                        <input type="text" class="form-control" id="first_name" value="{{ professor.first_name }}" readonly>
                        </div>
                        <div class="form-group">
                        <label for="birth">Data de Nascimento</label>
                        <input type="date" class="form-control" id="birth" value="{{ professor.history.birth|date:'Y-m-d' }}">
                        </div>
                        <div class="form-group">
                            <label for="date_career">Data de Carreira</label>
                            <input type="date" class="form-control" id="date_career" value="{{ professor.history.date_career|date:'Y-m-d' }}">
                        </div>
                        <div class="form-group">
                            <label for="date_campus">Data de Ingresso no Campus</label>
                            <input type="date" class="form-control" id="date_campus" value="{{ professor.history.date_campus|date:'Y-m-d' }}">
                        </div>
                        <div class="form-group">
                            <label for="date_professor">Data de Ingresso como Professor</label>
                            <input type="date" class="form-control" id="date_professor" value="{{ professor.history.date_professor|date:'Y-m-d' }}">
                        </div>
                        <div class="form-group">
                            <label for="date_area">Data da Área</label>
                            <input type="date" class="form-control" id="date_area" value="{{ professor.history.date_area|date:'Y-m-d' }}">
                        </div>
                        <div class="form-group">
                            <label for="date_institute">Data do Instituto</label>
                            <input type="date" class="form-control" id="date_institute" value="{{ professor.history.date_institute|date:'Y-m-d' }}">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                    <button type="button" class="btn btn-primary">Salvar Alterações</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block endbody %}
    <script src="{% static 'staff/js/professors_list.js' %}" data-lang={{LANGUAGE_CODE}}></script>
{% endblock %}