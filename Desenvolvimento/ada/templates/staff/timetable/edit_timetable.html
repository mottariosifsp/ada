{% extends "staff/base.html" %}
{% load i18n %}
{% load static %}

{% block head %}
    {{ block.super }}
      <title>{% trans "Criar Grade" %}</title>
      <script src="{% static 'staff/timetable/js/edit_timetable.js' %}" data-lang={{ LANGUAGE_CODE }}></script>
{% endblock %}

{% block body %}
  {{ block.super }}
  <h1><span id="selected_class" class="d-flex justify-content-center">{{ request.GET.class }}</span></h1>
<div class="container">
  <form id="course_select">
    {% csrf_token %}
    <table class="table" id="timetable_table">
      <thead class="thead-dark">
        <tr>
          <th scope="col" class="align-middle">{% trans "Horário" %}</th>
          <th scope="col" class="text-center">{% trans "Segunda-feira" %}</th>
          <th scope="col" class="text-center">{% trans "Terça-feira" %}</th>
          <th scope="col" class="text-center">{% trans "Quarta-feira" %}</th>
          <th scope="col" class="text-center">{% trans "Quinta-feira" %}</th>
          <th scope="col" class="text-center">{% trans "Sexta-feira" %}</th>
          <th scope="col" class="text-center">{% trans "Sábado" %}</th>
        </tr>
      </thead>
      <tbody>
        {% for row in timetable %}
        <tr class="text-center">
            {% for field in row %} 
            {% if forloop.counter == 1 %}
            {% blocktrans with field_text=field %}
            <th scope="row">{{ field_text }}</th>
            {% endblocktrans %}
            {% else %}
            <td rowspan="">
                <input list="courses{{ forloop.counter0 }}" value="{{ field }}" name="course" class="form-control datalist{{ forloop.counter0 }}" autocomplete="off">
                <datalist id="courses{{ forloop.counter0 }}">
                    {% for course in courses %}
                        {% blocktrans with name_course_text=course.name_course %}
                            <option class="dropdown-item-class" value="{{ name_course_text }}">
                        {% endblocktrans %}
                    {% endfor %}
                </datalist>
            </td>
            {% endif %} 
            {% endfor %}
        {% endfor %}
        
      </tbody>
    </table>
    <button type="button" class="btn btn-primary btn-block form-group" id="submit_timetable">{% trans "Enviar" %}</button>
  </form>
</div>
{% endblock %}
