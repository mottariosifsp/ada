{% extends "professor/base.html" %}
{% load i18n %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'attribution_preference/css/attribution_preference_courses.css' %}">
    <title>{% trans "FPA Usuário" %}</title>
    <style>
        .regime {
            margin-top: -16px;
        }
    </style>
{% endblock %}


{% block body %}
    <h1 class="title-page">FPA Usuário</h1>
    <nav>
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'home' %}"><i class="bi bi-house-door"></i></a></li>
        <li class="breadcrumb-item active">Preferência Atribuição</li>
        <li class="breadcrumb-item active">FPA Usuário</li>
    </ol>
    </nav>

    {% if not fpa_done %}
    <div class="container">
        <div id="card-no-fpa" class="card text-center centered-object">
          <div class="card-body">
            <h5 class="card-title">Nenhum FPA relacionado ao usuário foi encontrado no sistema</h5>
            <hr>
            <a href="{% url 'disponibility_attribution_preference' %}">
              <button class="btn btn-success">Comece seu Formulário de Preferência de Atividades</button>
            </a>
          </div>
        </div>
    </div>
    {% else %}
    <div class="container">
        <div class="card centered-object">
          <div class="card-body">
            <h5 class="card-title">Formulário de Preferência de Atividades - FPA (Anexo I - Resolução nº 109 de 4 de novembro de 2015)</h5>
            <hr>
            <div class="table-responsive">
                <table class="table table-bordered table-sm text-center">
                <tr>
                  <th colspan="6">Identificação do Docente</th>
                </tr>
                <tr>
                  <th>Docente:</th>
                  <td colspan="2">{{ request.user.get_full_name }}</td>
                  <th>Conhecido como:</th>
                  <td colspan="2">{{ request.user.first_name }}</td>
                </tr>
                <tr>
                  <th>Área:</th>
                  <td colspan="2">{{ user.blocks.first.name_block }}</td>
                  <th>E-mail:</th>
                  <td colspan="2">{{ request.user.email }}</td>
                </tr>
                <tr>
                  <th>Prontuário:</th>
                  <td colspan="2">CJ{{ request.user.registration_id  }}</td>
                  <th>Celular:</th>
                  <td colspan="2">{{ request.user.cell_phone }}</td>
                </tr>
                <tr>
                    <th>Regime de trabalho:</th>
                    <td class="col-2 20">20 horas</td>
                    <td class="col-2 40">40 horas</td>
                    <td class="col-2 rde">RDE</td>
                    <td class="col-2">Substituto</td>
                    <td class="col-2">Temporário</td>
                </tr>
            </table>

              
            <table class="table table-bordered table-sm text-center">
                <tr>
                  <th colspan="6">Disponibilidade de horário para atribuição de componentes curriculares</th>
                </tr>
                <tr>
                    <table class="regime table table-bordered table-sm text-center">
                        <thead>
                          <tr>
                            <th class="col-1 text-center align-middle">Turno</th>
                            <th class="col-2 text-center align-middle">Horários</th>
                            <th class=" text-center">Segunda-Feira</th>
                            <th class=" text-center">Terça-Feira</th>
                            <th class=" text-center">Quarta-Feira</th>
                            <th class=" text-center">Quinta-Feira</th>
                            <th class=" text-center">Sexta-Feira</th>
                            <th class=" text-center">Sábado</th>
                          </tr>
                        </thead>
                        <tbody class="block" id="timetable-courses">
                            {% for i in "MVN" %}
                              {% if i == "M" %}
                                <td class="text-center align-middle" rowspan="{{ turno.matutinoAulas }}">Matutino</td>
                                {% for horario in turno.matutino %}
                                  <tr>
                                    <td class="text-center align-middle">{{ horario.hour_start }} - {{ horario.hour_end }}</td>
                          
                                    <td class="text-center" id="btn-mon-mat-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="mon-mat-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="mon-mat-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-tue-mat-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="tue-mat-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="tue-mat-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-wed-mat-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="wed-mat-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="wed-mat-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-thu-mat-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="thu-mat-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="thu-mat-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-fri-mat-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="fri-mat-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="fri-mat-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-sat-mat-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="sat-mat-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="sat-mat-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                                  </tr>
                                {% endfor %}
                              {% elif i == "V" %}
                                <td class="text-center align-middle" rowspan="{{ turno.vespertinoAulas }}">Vespertino</td>
                                {% for horario in turno.vespertino %}
                                  <tr>
                                    <td class="text-center align-middle">{{ horario.hour_start }} - {{ horario.hour_end }}</td>
                          
                                    <td class="text-center" id="btn-mon-ves-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="mon-ves-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="mon-ves-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-tue-ves-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="tue-ves-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="tue-ves-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-wed-ves-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="wed-ves-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="wed-ves-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-thu-ves-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="thu-ves-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="thu-ves-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-fri-ves-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="fri-ves-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="fri-ves-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-sat-ves-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="sat-ves-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="sat-ves-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                                  </tr>
                                {% endfor %}
                              {% else %}
                                <td class="text-center align-middle" rowspan="{{ turno.noturnoAulas }}">Noturno</td>
                                {% for horario in turno.noturno %}
                                  <tr>
                                    <td class="text-center align-middle">{{ horario.hour_start }} - {{ horario.hour_end }}</td>
                          
                                    <td class="text-center" id="btn-mon-not-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="mon-not-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="mon-not-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-tue-not-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="tue-not-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="tue-not-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-wed-not-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="wed-not-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="wed-not-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-thu-not-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="thu-not-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="thu-not-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-fri-not-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="fri-not-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="fri-not-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-sat-not-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="sat-not-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="sat-not-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                                  </tr>
                                {% endfor %}
                              {% endif %}
                            {% endfor %}
                          </tbody>
                    </table>
                </tr>
            </table>

            <table class="table table-bordered table-sm text-center">
                <tr>
                    <th colspan="6">Disciplinas escolhidas</th>
                </tr>
                <table class="regime table table-bordered table-sm text-center">
                    <thead>
                        <th class="text-center">Sigla</th>
                        <th class="text-center">Nome</th>
                        <th class="text-center">Curso</th>
                        <th class="text-center">Turno</th>
                        <th class="text-center">Aulas</th>
                    </thead>
                    <tbody id="courses-list">

                    </tbody>
                </table>
                    
            </table>

            </div>
            <a href="{% url 'disponibility_attribution_preference' %}"><button type="button" class="btn btn-info w-100 float-right mb-2">Refazer FPA</button></a>
        </div>
    </div>
    
    {% endif %}
    
{% endblock %}

{% block endbody %}
  <script src="{% static 'attribution_preference/js/attribution_preference.js' %}" work_regime='{{work_regime}}' work_disponibility='{{work_disponibility}}' work_courses='{{work_courses}}' data-lang={{LANGUAGE_CODE}}></script>
{% endblock %}
