{% extends "professor/base.html" %}
{% load i18n %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'attribution_preference/css/courses.css' %}">
    <title>{% trans "FPA Usuário" %}</title>
    <style>
        .card-blockk {
            width: 500px;
            float: left;
            margin-right: 30px;
            margin-top: 30px;
        }
        .division {
            margin-bottom: -10px;
        }
        .center {
            left: 25%;
        }
        .card-blockk-disponibility {
            margin-left: 30px;
            margin-right: 30px;
            margin-bottom: 20px;
        }
        .message-info-done {
            background-color: #2B8D4C;
            font-weight: 500;
            padding: 5px 10px 5px 10px;
            border-radius: 6px;
            color: #173f25;
        }
        .message-info-not-done {
            background-color: #FFDD95;
            font-weight: 500;
            padding: 5px 10px 5px 10px;
            border-radius: 6px;
            color: #664d15;
        }
        .message-info-not-configured{
            background-color: #698FAC;
            font-weight: 500;
            padding: 5px 10px 5px 10px;
            border-radius: 6px;
            color: #c6e5ff;
        }
        .message-info-not-started {
            background-color: #2B597C;
            font-weight: 500;
            padding: 5px 10px 5px 10px;
            border-radius: 6px;
            color: #cee6f9;
        }
        .link {
            color: blue;
            text-decoration: underline;
            font-style: italic;
        }
        .center-btn {
            text-align: center;
        }
        .card-title {
            font-weight: 500;
        }

        .overlay {
            position: absolute;
            top: 80%;
            left: 29%;
            transform: trans(-50%, -50%);
            z-index: 99;
            display:grid;
            justify-content: center;
            align-items: center;
        }


        /* Estilos para o modal */
        .modal-div {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            z-index: 99;
        }
        body {background-color: #def2fc81;}

        /*btn green*/
        .ada-btn-sucess {
            background-color: #147334;
            border: #0d2131;
            color: #dcffe8;
        }
        .ada-btn-sucess:hover {
            background-color: #147334;
            border: #0d2131;
            color: #dcffe8;
        }
        .ada-btn-sucess:active {
            background-color: #147334;
            border: #0d2131;
            color: #dcffe8;
        }

        /*btn blue dark*/
        .ada-btn-blue-dark {
            background-color: #174365;
            border: #0d2131;
            color: #ddf0ff;
        }
        .ada-btn-blue-dark:hover {
            background-color: #052d4b;
            border: #072034;
            color: #ddf0ff;
        }
        .ada-btn-blue-dark:active {
            background-color: #174365;
            border: #0d2131;
            color: #ddf0ff;
        }

        /*btn blue ligth*/
        .ada-btn-blue {
            background-color: #9FBBD1;
            border: #5a8ab0;
            color: #174365;
        }
        .ada-btn-blue:hover {
            background-color: #9FBBD1;
            border: #5a8ab0;
            color: #174365;
        }
        .ada-btn-blue:active {
            background-color: #9FBBD1;
            border: #0d2131;
            color: #174365;
        }
    </style>
{% endblock %}

{% block body %}
    <h1 class="title-page">{% trans "FPA Usuário" %}</h1>
    <nav>
    <ol class="breadcrumb hidden-itens">
        <li class="breadcrumb-item"><a href="{% url 'home' %}"><i class="bi bi-house-door"></i></a></li>
        <li class="breadcrumb-item active">{% trans "FPA Usuário" %}</li>
    </ol>
    </nav>
    
    {% if started_times > 0 and disponilibity_done == 'True' %}
    <div class="float-right message-info-done"><i class="far fa-check-circle"></i> {% trans 'ENVIADO'%}</div>
    <h5>{% trans 'Envio de Disponibilidade'%}:</h5>
    <hr>
        <div class="container">
            <div class="card card-blockk-disponibility centered-object">
                <div class="card-body">
                    <h5 class="card-title">{% trans 'Disponibilidade Geral'%}</h5>
                    <hr>
                    <p><b>{% trans 'Situação' %}:</b> {% trans 'Você enviou sua preferência de horários. Agora pode atualizar ou enviar suas preferências em relação aos cursos abaixo' %}:</p>
                    <a href="{% url 'disponibility_attribution_preference' %}">
                        <button class="btn w-50 ada-btn-blue d-inline-block"><i class="fas fa-redo"></i> {% trans "Refaça seu FPA" %}</button>
                    </a>
                    <a onclick="fpa_blockk_animation()">
                        <button class="btn ada-btn-sucess"><i class="fas fa-share"></i> {% trans "Enviar Escolha Preferência de Cursos" %}</button>
                    </a>
                </div>
            </div>
        </div>
    {% elif started_times > 0 %}
    <div class="float-right message-info-not-done"><i class="fa fa-exclamation-triangle mr-2"></i> {% trans 'NÃO ENVIADO'%}</div>
    <h5>{% trans 'Envio de Disponibilidade'%}:</h5>
    <hr>
        <div class="container">
            <div class="card card-blockk-disponibility centered-object">
                <div class="card-body">
                    <h5 class="card-title">{% trans 'Disponibilidade Geral'%}</h5>
                    <hr>
                    <p><b>{% trans 'Situação' %}:</b> {% trans 'Iniciou o envio de FPAs para o sistema. Primeiro envie sua disponibilidade geral abaixo e espere os próximos passos' %}:</p>
                    <div class="center-btn">
                        <a href="{% url 'disponibility_attribution_preference' %}">
                            <button class="btn ada-btn-sucess"><i class="fas fa-share"></i> {% trans "Enviar sua Preferência de Disponibilidade Geral" %}</button>
                        </a>
                    </div>
                    
                </div>
            </div>
        </div>
    {% else %}
    <div class="float-right message-info-not-started">{% trans 'NÃO INICIOU'%}</div>
    <h5>{% trans 'Envio de Disponibilidade'%}:</h5>
    <hr>
        <div class="container">
            <div class="card card-blockk-disponibility centered-object">
                <div class="card-body">
                    <h5 class="card-title">{% trans 'Disponibilidade Geral'%}</h5>
                    <hr>
                    <p><b>{% trans 'Situação' %}:</b> {% trans 'Não possível enviar a disponilidade de horários do usuário' %}.</p>
                    <p><b>{% trans 'Intruções' %}:</b> {% trans 'Espere até o dia que comece o envio de escolha de preferências (FPA) dos seu blocos' %}.</p>
                </div>
            </div>
        </div>
    {% endif %}
    <h5 id="fpa-blockk">Envio de FPA para cada Bloco:</h5>
    <hr class="division">
    <div id='container' class="container">
        {% for blockk in stage_fpas %}
            {% if forloop.last %}
                {% if is_pair %}
                    {% if blockk.status == 'configured' %}
                        <div class="card card-blockk centered-object">
                            <div class="card-body">
                                <div class="float-right message-info-not-started"><i class="fas fa-cog"></i> {% trans 'CONFIGURADO'%}</div>
                                <h5 class="card-title">{% trans 'Bloco'%}: {{blockk.blockk.name_block}}</h5>
                                <hr>
                                <p>
                                    <b>{% trans 'Início' %}:</b> {{blockk.start_day}} {% trans 'ás' %} {{blockk.start_time}}
                                </p>
                                <p> 
                                    <b>{% trans 'Fim' %}:</b> {{blockk.end_day}} {% trans 'ás' %} {{blockk.end_time}}
                                </p>
                                <p><b>{% trans 'Instruções' %}:</b> {% trans 'Espere até o dia configurado para o período de envio de FPAs' %}</p>
                            </div>
                        </div>
                    {% elif blockk.status == 'not_configured' %}
                        <div class="card card-blockk centered-object">
                            <div class="card-body">
                                <div class="float-right message-info-not-configured"><i class="fas fa-times-circle"></i> {% trans 'NÃO CONFIGURADO'%}</div>
                                <h5 class="card-title">{% trans 'Bloco'%}: {{blockk.blockk.name_block}}</h5>
                                <hr>
                                <p>
                                    <b>{% trans 'Início' %}:</b> -- {% trans 'ás' %} --
                                </p>
                                <p> 
                                    <b>{% trans 'Fim' %}:</b> -- {% trans 'ás' %} --
                                </p>
                                <p><b>{% trans 'Instruções' %}:</b> {% trans 'Espere para que o administrador da área configure o período de envio de FPAs' %}</p>
                            </div>
                        </div>
                    {% elif blockk.status == 'started' %}
                        <div class="card card-blockk centered-object">
                            <div class="card-body">
                                <div class="float-right message-info-not-done"><i class="fas fa-clock"></i> {% trans 'SEM ENVIO'%}</div>
                                <h5 class="card-title">{% trans 'Bloco'%}: {{blockk.blockk.name_block}}</h5>
                                <hr>
                                <p>
                                    <b>{% trans 'Início' %}:</b> {{blockk.start_day}} {% trans 'ás' %} {{blockk.start_time}}
                                </p>
                                <p> 
                                    <b>{% trans 'Fim' %}:</b> {{blockk.end_day}} {% trans 'ás' %} {{blockk.end_time}}
                                </p>
                                <a href="{% url 'disponibility_attribution_preference'  %}">
                                    <button class="w-100 btn ada-btn-sucess"><i class="fas fa-check"></i> {% trans "Faça seu FPA" %}</button>
                                </a>

                                <div class="container mt-4">
                                    <div class="d-flex">
                                        <a href="{% url 'disponibility_attribution_preference'  %}" class="flex-fill pl-10 pr-10">
                                        <button class="btn ada-btn-blue btn-block"><i class="fas fa-redo"></i> {% trans "Refaça seu FPA" %}</button>
                                        </a>
                                        <a href="{% url 'show_attribution_preference' blockk.blockk.registration_block_id %}" class="flex-fill ml-2 pl-10 pr-10">
                                        <button class="btn ada-btn-blue-dark btn-block"><i class="fas fa-download"></i> {% trans "Veja seu FPA" %}</button>
                                        </a>
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    {% elif blockk.status == 'finished' %}
                        <div class="card card-blockk centered-object">
                            <div class="card-body">
                                <div class="float-right message-info-done"><i class="far fa-check-circle"></i> {% trans 'FINALIZADA'%}</div>
                                <h5 class="card-title">{% trans 'Bloco'%}: {{blockk.blockk.name_block}}</h5>
                                <hr>
                                <p><b>{% trans 'Fim' %}:</b> {{blockk.end_day}} {% trans 'ás' %} {{blockk.end_time}}</p>

                                <!-- colocar um texto para caso nao tenha enviado e tenha terminado 
                                <a href="{% url 'disponibility_attribution_preference'  %}">
                                    <button class="w-100 btn ada-btn-sucess"><i class="fas fa-check"></i> {% trans "Faça seu FPA" %}</button>
                                </a> -->

                                <a href="{% url 'show_attribution_preference' blockk.blockk.registration_block_id %}">
                                    <button class="btn w-50 ada-btn-blue-dark d-inline-block"><i class="fas fa-download"></i> {% trans "Veja seu FPA" %}</button>
                                </a>
                            </div>
                        </div>
                    {% endif %}
                {% else %}
                    {% if blockk.status == 'configured' %}
                        <div class="card card-blockk center centered-object">
                            <div class="card-body">
                                <div class="float-right message-info-not-started"><i class="fas fa-cog"></i> {% trans 'CONFIGURADO'%}</div>
                                <h5 class="card-title">{% trans 'Bloco'%}: {{blockk.blockk.name_block}}</h5>
                                <hr>
                                <p>
                                    <b>{% trans 'Início' %}:</b> {{blockk.start_day}} {% trans 'ás' %} {{blockk.start_time}}  
                                </p>
                                <p>
                                    <b>{% trans 'Fim' %}:</b> {{blockk.end_day}} {% trans 'ás' %} {{blockk.end_time}}
                                </p>
                                <p><b>{% trans 'Instruções' %}:</b> {% trans 'Espere até o dia configurado para o período de envio de FPAs' %}</p>
                            </div>
                        </div>
                    {% elif blockk.status == 'not_configured' %}
                        <div class="card card-blockk center centered-object">
                            <div class="card-body">
                                <div class="float-right message-info-not-configured"><i class="fas fa-times-circle"></i> {% trans 'NÃO CONFIGURADO'%}</div>
                                <h5 class="card-title">{% trans 'Bloco'%}: {{blockk.blockk.name_block}}</h5>
                                <hr>
                                <p>
                                    <b>{% trans 'Início' %}:</b> -- {% trans 'ás' %} --  
                                </p>
                                <p>
                                    <b>{% trans 'Fim' %}:</b> -- {% trans 'ás' %} --
                                </p>
                                <p><b>{% trans 'Instruções' %}:</b> {% trans 'Espere para que o administrador da área configure o período de envio de FPAs' %}</p>
                            </div>
                        </div>
                    {% elif blockk.status == 'started' %}
                        <div class="card card-blockk center centered-object">
                            <div class="card-body">
                                <div class="float-right message-info-not-done"><i class="fas fa-clock"></i> {% trans 'SEM ENVIO'%}</div>
                                <h5 class="card-title">{% trans 'Bloco'%}: {{blockk.blockk.name_block}}</h5>
                                <hr>
                                <p>
                                    <b>{% trans 'Início' %}:</b> {{blockk.start_day}} {% trans 'ás' %} {{blockk.start_time}}  
                                </p>
                                <p>
                                    <b>{% trans 'Fim' %}:</b> {{blockk.end_day}} {% trans 'ás' %} {{blockk.end_time}}
                                </p>
                                <a href="{% url 'disponibility_attribution_preference'  %}">
                                    <button class="w-100 btn ada-btn-sucess"><i class="fas fa-check"></i> {% trans "Faça seu FPA" %}</button>
                                </a>

                                <div class="container mt-4">
                                    <div class="d-flex">
                                        <a href="{% url 'disponibility_attribution_preference'  %}" class="flex-fill pl-10 pr-10">
                                        <button class="btn ada-btn-blue btn-block"><i class="fas fa-redo"></i> {% trans "Refaça seu FPA" %}</button>
                                        </a>
                                        <a href="{% url 'show_attribution_preference' blockk.blockk.registration_block_id %}" class="flex-fill ml-2 pl-10 pr-10">
                                        <button class="btn ada-btn-blue-dark btn-block"><i class="fas fa-download"></i> {% trans "Veja seu FPA" %}</button>
                                        </a>
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    {% elif blockk.status == 'finished' %}
                        <div class="card card-blockk center centered-object">
                            <div class="card-body">
                                <div class="float-right message-info"><i class="fas fa-check-circle"></i> {% trans 'FINALIZADO'%}</div>
                                <h5 class="card-title">{% trans 'Bloco'%}: {{blockk.blockk.name_block}}</h5>
                                <hr>
                                <p>
                                    <b>{% trans 'Início' %}:</b> {{blockk.start_day}} {% trans 'ás' %} {{blockk.start_time}}  
                                </p>
                                <p>
                                    <b>{% trans 'Fim' %}:</b> {{blockk.end_day}} {% trans 'ás' %} {{blockk.end_time}}
                                </p>

                                <a href="{% url 'show_attribution_preference' blockk.blockk.registration_block_id %}">
                                    <button class="btn w-50 ada-btn-blue-dark d-inline-block"><i class="fas fa-download"></i> {% trans "Veja seu FPA" %}</button>
                                </a>
                            </div>
                        </div>
                    {% endif %}
                {% endif %}
        {% else %}
            {% if blockk.status == 'configured' %}
                <div class="card card-blockk centered-object">
                    <div class="card-body">
                        <div class="float-right message-info-not-started"><i class="fas fa-cog"></i> {% trans 'CONFIGURADO'%}</div>
                        <h5 class="card-title">{% trans 'Bloco'%}: {{blockk.blockk.name_block}}</h5>
                        <hr>
                        <p>
                            <b>{% trans 'Início' %}:</b> {{blockk.start_day}} {% trans 'ás' %} {{blockk.start_time}}
                        </p>
                        <p>
                            <b>{% trans 'Fim' %}:</b> {{blockk.end_day}} {% trans 'ás' %} {{blockk.end_time}}
                        </p>
                        <p><b>{% trans 'Instruções' %}:</b> {% trans 'Espere até o dia configurado para o período de envio de FPAs' %}</p>
                    </div>
                </div>
            {% elif blockk.status == 'not_configured' %}
                <div class="card card-blockk centered-object">
                    <div class="card-body">
                        <div class="float-right message-info-not-configured"><i class="fas fa-times-circle"></i> {% trans 'NÃO CONFIGURADO'%}</div>
                        <h5 class="card-title">{% trans 'Bloco'%}: {{blockk.blockk.name_block}}</h5>
                        <hr>
                        <p>
                            <b>{% trans 'Início' %}:</b> -- {% trans 'ás' %} --
                        </p> 
                        <p>
                            <b>{% trans 'Fim' %}:</b> -- {% trans 'ás' %} --
                        </p>
                        <p><b>{% trans 'Instruções' %}:</b> {% trans 'Espere para que o administrador da área configure o período de envio de FPAs' %}</p>
                    </div>
                </div>
            {% elif blockk.status == 'started' %}
                <div class="card card-blockk centered-object">
                    <div class="card-body">
                        <div class="float-right message-info-not-done"><i class="fas fa-clock"></i> {% trans 'SEM ENVIO'%}</div>
                        <h5 class="card-title">{% trans 'Bloco'%}: {{blockk.blockk.name_block}}</h5>
                        <hr>
                        <p>
                            <b>{% trans 'Início' %}:</b> {{blockk.start_day}} {% trans 'ás' %} {{blockk.start_time}}
                        </p> 
                        <p> 
                            <b>{% trans 'Fim' %}:</b> {{blockk.end_day}} {% trans 'ás' %} {{blockk.end_time}}
                        </p>
                        <a href="{% url 'disponibility_attribution_preference'  %}">
                            <button class="w-100 btn ada-btn-sucess"><i class="fas fa-check"></i> {% trans "Faça seu FPA" %}</button>
                        </a>

                        <div class="container mt-4">
                            <div class="d-flex">
                                <a href="{% url 'disponibility_attribution_preference'  %}" class="flex-fill pl-10 pr-10">
                                <button class="btn ada-btn-blue btn-block"><i class="fas fa-redo"></i> {% trans "Refaça seu FPA" %}</button>
                                </a>
                                <a href="{% url 'show_attribution_preference' blockk.blockk.registration_block_id %}" class="flex-fill ml-2 pl-10 pr-10">
                                <button class="btn ada-btn-blue-dark btn-block"><i class="fas fa-download"></i> {% trans "Veja seu FPA" %}</button>
                                </a>
                            </div>
                        </div>
                        
                    </div>
                </div>
            {% elif blockk.status == 'finished' %}
                <div class="card card-blockk centered-object">
                    <div class="card-body">
                        <div class="float-right message-info-done"><i class="far fa-check-circle"></i> {% trans 'FINALIZADA'%}</div>
                        <h5 class="card-title">{% trans 'Bloco'%}: {{blockk.blockk.name_block}}</h5>
                        <hr>
                        <p><b>{% trans 'Fim' %}:</b> {{blockk.end_day}} {% trans 'ás' %} {{blockk.end_time}}</p>

                        <!-- colocar um texto para caso nao tenha enviado e tenha terminado 
                        <a href="{% url 'disponibility_attribution_preference'  %}">
                            <button class="w-100 btn ada-btn-sucess"><i class="fas fa-check"></i> {% trans "Faça seu FPA" %}</button>
                        </a> -->

                        <a href="{% url 'show_attribution_preference' blockk.blockk.registration_block_id %}">
                            <button class="btn w-50 ada-btn-blue-dark d-inline-block"><i class="fas fa-download"></i> {% trans "Veja seu FPA" %}</button>
                        </a>
                    </div>
                </div>
            {% endif %}
        {% endif %}
        {% endfor %}
    </div>
    <div class="overlay" style="display: none;">
        <div class="modal-div">
            <h3><i class="fas fa-lock"></i> {% trans "Sessão Bloqueada" %}</h3>
            <ul>
                <li>{% trans "Antes de enviar sua preferênciade de atividades, você deve enviar sua escolha de disponibilidade geral" %}.</li>
            </ul>
            <a href="{% url 'disponibility_attribution_preference' %}">
                <button class="w-100 btn ada-btn-blue-dark"><i class="fas fa-share"></i> {% trans "Faça seu FPA" %}</button>
            </a>
        </div>
    </div>
    
{% endblock %}

{% block endbody %}
    <script src="{% static 'attribution_preference/js/index.js' %}" disponilibity_done='{{disponilibity_done}}' data-lang={{LANGUAGE_CODE}}></script>
{% endblock %}
