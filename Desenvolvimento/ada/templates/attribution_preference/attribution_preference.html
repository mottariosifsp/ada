{% extends "professor/base.html" %}
{% load i18n %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'attribution_preference/css/courses.css' %}">
    <title>{% trans "FPA Usuário" %}</title>
{% endblock %}

{% block body %}
    <h1 class="title-page">{% trans "FPA Usuário" %}</h1>
    <nav>
    <ol class="breadcrumb hidden-itens">
        <li class="breadcrumb-item"><a href="{% url 'home' %}"><i class="bi bi-house-door"></i></a></li>
        <li class="breadcrumb-item active">{% trans "Preferência Atribuição" %}</li>
        <li class="breadcrumb-item active">{% trans "FPA Usuário" %}</li>
    </ol>
    </nav>

    {% if not is_fpa_done %}
    <div class="container">
        <div id="card-no-fpa" class="card text-center centered-object">
          <div class="card-body">
            <h5 class="card-title">{% trans "Nenhum FPA relacionado ao usuário foi encontrado no sistema" %}</h5>
            <hr>
            <a href="{% url 'disponibility_attribution_preference' %}">
              <button class="btn btn-success">{% trans "Comece o seu FPA" %}</button>
            </a>
          </div>
        </div>
    </div>
    {% else %}
    <div class="container">
        <div class="card centered-object">
          <div class="card-body">
            <h5 class="card-title">{% trans "Formulário de Preferência de Atividades - FPA (Anexo I - Resolução nº 109 de 4 de novembro de 2015)" %}</h5>
            <hr>
            <div class="table-responsive">
                <table class="table table-bordered table-sm text-center">
                <tr>
                  <th colspan="6">{% trans "Identificação do Docente" %}</th>
                </tr>
                <tr>
                  <th>{% trans "Docente" %}:</th>
                  <td colspan="2">{{ request.user.get_full_name }}</td>
                  <th>{% trans "Conhecido como" %}:</th>
                  <td colspan="2">{{ request.user.first_name }}</td>
                </tr>
                <tr>
                  <th>{% trans "Área" %}:</th>
                  {% blocktrans with name_block_text=user.blocks.first.name_block %}
                  <td colspan="2">{{ name_block_text }}</td>
                  {% endblocktrans %}
                  <th>{% trans "E-mail" %}:</th>
                  <td colspan="2">{{ request.user.email }}</td>
                </tr>
                <tr>
                  <th>{% trans "Prontuário" %}:</th>
                  <td colspan="2">{% trans "CJ" %}{{ request.user.registration_id  }}</td>
                  <th>{% trans "Celular" %}:</th>
                  <td colspan="2">{{ request.user.cell_phone }}</td>
                </tr>
                <tr>
                    <th>{% trans "Regime de trabalho" %}:</th>
                    <td class="col-2 20">20 {% trans "horas" %}</td>
                    <td class="col-2 40">40 {% trans "horas" %}</td>
                    <td class="col-2 rde">{% trans "RDE" %}</td>
                    <td class="col-2">{% trans "Substituto" %}</td>
                    <td class="col-2">{% trans "Temporário" %}</td>
                </tr>
            </table>

              
            <table class="table table-bordered table-sm text-center">
                <tr>
                  <th colspan="6">{% trans "Disponibilidade de horário para atribuição de componentes curriculares" %}</th>
                </tr>
                <tr>
                    <table class="regime table table-bordered table-sm text-center">
                        <thead>
                          <tr>
                            <th class="col-1 text-center align-middle">{% trans "Período" %}</th>
                            <th class="col-2 text-center align-middle">{% trans "Horários" %}</th>
                            <th class=" text-center">{% trans "Segunda-Feira" %}</th>
                            <th class=" text-center">{% trans "Terça-Feira" %}</th>
                            <th class=" text-center">{% trans "Quarta-Feira" %}</th>
                            <th class=" text-center">{% trans "Quinta-Feira" %}</th>
                            <th class=" text-center">{% trans "Sexta-Feira" %}</th>
                            <th class=" text-center">{% trans "Sábado" %}</th>
                          </tr>
                        </thead>
                        <tbody class="block" id="timetable-courses">
                            {% for i in "MVN" %}
                              {% if i == "M" %}
                                <td class="text-center align-middle" rowspan="{{ shift.morning_classes }}">{% trans "Matutino" %}</td>
                                {% for timeslot in shift.morning %}
                                  <tr>
                                    <td class="text-center hour-print align-middle">{{ timeslot.hour_start }} - {{ timeslot.hour_end }}</td>
                          
                                    <td class="text-center" id="btn-mon-mat-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="mon-mat-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="mon-mat-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-tue-mat-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="tue-mat-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="tue-mat-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-wed-mat-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="wed-mat-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="wed-mat-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-thu-mat-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="thu-mat-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="thu-mat-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-fri-mat-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="fri-mat-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="fri-mat-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-sat-mat-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="sat-mat-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="sat-mat-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                                  </tr>
                                {% endfor %}
                              {% elif i == "V" %}
                                <td class="text-center align-middle" rowspan="{{ shift.afternoon_classes }}">{% trans "Vespertino" %}</td>
                                {% for timeslot in shift.afternoon %}
                                  <tr>
                                    <td class="text-center hour-print align-middle">{{ timeslot.hour_start }} - {{ timeslot.hour_end }}</td>
                          
                                    <td class="text-center" id="btn-mon-ves-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="mon-ves-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="mon-ves-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-tue-ves-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="tue-ves-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="tue-ves-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-wed-ves-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="wed-ves-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="wed-ves-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-thu-ves-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="thu-ves-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="thu-ves-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-fri-ves-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="fri-ves-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="fri-ves-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-sat-ves-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="sat-ves-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="sat-ves-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                                  </tr>
                                {% endfor %}
                              {% else %}
                                <td class="text-center align-middle" rowspan="{{ shift.nocturnal_classes }}">{% trans "Noturno" %}</td>
                                {% for timeslot in shift.nocturnal %}
                                  <tr>
                                    <td class="text-center hour-print align-middle">{{ timeslot.hour_start }} - {{ timeslot.hour_end }}</td>
                          
                                    <td class="text-center" id="btn-mon-not-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="mon-not-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="mon-not-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-tue-not-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="tue-not-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="tue-not-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-wed-not-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="wed-not-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="wed-not-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-thu-not-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="thu-not-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="thu-not-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-fri-not-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="fri-not-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="fri-not-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                          
                                    <td class="text-center" id="btn-sat-not-{{ forloop.counter }}">
                                      <div class="openModalBtn">
                                        <div data-id="sat-not-{{ forloop.counter }}" class="btn-group-toggle" data-toggle="buttons">
                                          <div id="sat-not-{{ forloop.counter }}"><i></i></div>
                                        </div>
                                      </div>
                                    </td>
                                  </tr>
                                {% endfor %}
                              {% endif %}
                            {% endfor %}
                          </tbody>
                    </table>
                </tr>
            </table>

            <table class="table table-bordered table-sm text-center">
                <tr>
                    <th colspan="6">{% trans "Disciplinas escolhidas" %}</th>
                </tr>
                <table class="regime table table-bordered table-sm text-center">
                    <thead>
                        <th class="text-center">{% trans "Sigla" %}</th>
                        <th class="text-center">{% trans "Nome" %}</th>
                        <th class="text-center">{% trans "Disciplina" %}</th>
                        <th class="text-center">{% trans "Período" %}</th>
                        <th class="text-center">{% trans "Aulas" %}</th>
                    </thead>
                    <tbody id="courses-list">

                    </tbody>
                </table>
                    
            </table>
            </div>
            
            <div class="row">
              <div class="col-6 text-right">
                <a href="{% url 'disponibility_attribution_preference' %}">
                  <button type="button" class="hidden-itens btn btn-info">{% trans "Refazer FPA" %}</button>
                </a>
              </div>
              <div class="col-6">
                <button type="button" onClick="window.print();" class="hidden-itens btn btn-success">{% trans "Imprimir PDF" %}</button>
              </div>
            </div>
        </div>
    </div>
    {% endif %}
{% endblock %}

{% block endbody %}
  <script src="{% static 'attribution_preference/js/attribution_preference.js' %}" user_regime='{{ user_regime }}' user_disponibility_choosed='{{user_disponibility_choosed}}' user_courses_choosed='{{user_courses_choosed}}' data-lang={{LANGUAGE_CODE}}></script>
{% endblock %}
